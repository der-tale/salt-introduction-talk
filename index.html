<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>SaltStack - Introduction and First Steps</title>

		<meta name="description" content="SaltStack - Introduction and First Steps">
		<meta name="author" content="Manuel Zamora">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/white.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->

    <style>
      div.reveal {
        background-image: url("img/etecture.jpg");
        background-repeat: no-repeat;
        background-size: 50px;
        background-position: 40px calc(100% - 40px);
        background-attachment: fixed;

      }

      .reveal section img.logoimage {
        border: 0;
        height: 200px;
        box-shadow: none;
      }

      .reveal section img.noborder {
        border: 0;
        box-shadow: none;
      }
    </style>
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section>
          <img src="img/saltstack.png" style="border: 0; box-shadow: none;">
					<h1>SaltStack</h1>
					<h3>Introduction and First Steps</h3>
					<p>
						<small><a href="mailto:manuel@zamora.de">Manuel Zamora</a> / <a href="http://www.etecture.de">ETECTURE GmbH</a></small>
					</p>
				</section>

        <section>
          <section>
            <h1>Infrastructure Automation</h1>
          </section>

          <section>
            <h3>Lean .*</h3>
            <img src="img/ideas-code-data.jpg" /><br />
            <small>Minimize total time through the loop</small>
          </section>

          <section>
            <h3>Continuous Delivery</h3>
            <img src="img/cd.png" /><br />
          </section>

          <section>
            <h3>DevOps</h3>
            <img src="img/devops-meme2.jpg" style="width: 600px;">
          </section>

          <section>
            <img src="img/mainframe-computer.jpg" style="width: 80%;" />
          </section>

          <section>
            <img src="img/clean-servers.jpg" style="width: 80%;" />
          </section>

          <section>
            <img src="img/aws.png" class="logoimage">
            <img src="img/azure.png" class="logoimage">
            <img src="img/digitalocean.png" class="logoimage">
            <img src="img/heroku.png" class="logoimage">
            <img src="img/openstack.png" class="logoimage">
            <img src="img/rackspace.jpg" class="logoimage">
            <img src="img/docker.png" class="logoimage">
          </section>

          <section>
            <h3>Pets vs Cattle</h3>
            <img src="img/pets-cattle.jpg" style="width: 800px;">
          </section>

          <section>
            <img src="img/automateallthethings.jpg" style="width: 600px;">
          </section>

          <section>
            <h3>Goals</h3>
            <p>Deployments should be boring with no surprises</p>
            <p>Deployments should be fast with minimal (or no) downtime</p>
            <p>Deployments should be idempotently repeatable</p>
            <p>Infrastructure as code: One source of truth</p>
          </section>

          <section>
            <img src="img/chef.jpg" class="logoimage">
            <img src="img/ansible.png" class="logoimage">
            <img src="img/saltstack.png" class="logoimage">
            <img src="img/libcloud.png" class="logoimage">
            <img src="img/terraform.png" class="logoimage">
            <img src="img/vagrant.jpg" class="logoimage">
            <img src="img/kubernetes.png" class="logoimage">
            <img src="img/mesos.png" class="logoimage">
          </section>

        </section>

        <section>
          <section>
              <h1>Salt</h1>

              <img src="img/saltstack.png" class="logoimage">
          </section>

          <section>
            <h3>Key Features</h3>
            <p>Remote Execution</p>
            <p>Configuration Management</p>
            <p>Parallel, Lightweight</p>
            <p>Flexible</p>
          </section>

          <section>
            <h3>Technologies</h3>
            <p>Python</p>
            <p>YAML + Jinja</p>
            <p>ZeroMQ + MsgPack</p>
            <p>Master / Masterless</p>
            <p>Linux, xBSD, Solaris, Windows</p>
          </section>
        </section>
        <section>

          <section>
            <img src="img/saltstack.png" class="logoimage">
            <h1>Components and Terminology</h1>
          </section>

          <section>
            <h3>Master &amp; Minions</h3>
            <img src="img/master.png" class="noborder" style="width: 400px;">
          </section>

          <section>
            <h3>Grains</h3>
            <img src="img/grains.png" class="noborder" style="width: 300px;">
          </section>

          <section>
            <h3>Modules &amp; Functions</h3>
            <img src="img/remote-execution.png" class="noborder" style="width: 600px;">
          </section>

          <section>
            <h3>States / Formulas</h3>
            <img src="img/states.png" class="noborder" style="width: 600px;">
          </section>

          <section>
            <h3>Pillar</h3>
            <img src="img/pillar.png" class="noborder" style="width: 300px;">
          </section>

          <section>
            <h3>Returners &amp; Salt Mine</h3>
            <img src="img/returners.png" class="noborder" style="width: 600px;">
          </section>

          <section>
            <h3>Reactor</h3>
            <img src="img/reactor.png" class="noborder" style="width: 600px;">
          </section>

          <section>
            <h3>Salt Cloud</h3>
            <img src="img/cloud.png" class="noborder" style="width: 800px;">
          </section>

        </section>
        <section>

          <section>
            <h1>Basic Usage</h1>
            <img src="img/saltstack.png" class="logoimage">
          </section>

          <section>
            <h3>Bootstrapping</h3>
            <pre><code data-trim>
> wget -O install_salt.sh https://bootstrap.saltstack.com
> sudo sh install_salt.sh &lt;args&gt;
            </code></pre>

            <p>Install Master/Minion, preseed keys, set minion id + master dns, (not) start daemons</p>
            <p>By hand or automated via Vagrant plugin, Terraform, AWS bootstrap shell script, ...</p>

          </section>

          <section>
            <h3>Configuration Master</h3>
            <pre><code data-trim>
gitfs_provider: gitpython
gitfs_remotes:
  - https://github.com/saltstack-formulas/postgres-formula.git
fileserver_backend:
  - roots
  - git
file_roots:
  base:
    - /srv/salt/states
    - /srv/salt/formulas/sun-java-formula
pillar_roots:
  base:
    - /srv/salt/pillars
ext_pillar:
  - git: master http://stash/project/conf.git root=subdirectory
log_level: debug
            </code></pre>
          </section>

          <section>
            <h3>Configuration Minion</h3>
            <pre><code data-trim>
master: salt-master.etecture.com
log_level: debug
mine_interval: 1
grains:
  roles:
    - webserver
  somekey:
    - somevalue
id: some-node-name
            </code></pre>
          </section>

          <section>
            <h3>Commands &amp; Targeting</h3>
            <pre><code data-trim>
> salt '*' cmd.run 'uname -a'
> salt 'minion*' disk.usage
> salt -G 'roles:webserver' pkg.install vim
> salt -C 'G@os:Ubuntu and G@roles:webserver' network.interfaces
            </code></pre>
          </section>

          <section>
            <h3>States: Formulas ("State Files")</h3>
            <pre><code data-trim>
include:
  - some-other-state

app-running:
    service.running:
    - name: apache
    - enable: True
    - require:
      - file: apache-config
            </code></pre>
          </section>

          <section>
            <h3>States: Ordering, Requisites</h3>
            <img src="img/ordering-requisites.png" style="width: 700px; border: 0; box-shadow: none;" />
            <p>Requistes match <i>both</i> state ID and name property</p>
          </section>

          <section>
            <h3>Pillar</h3>
            <pre><code data-trim>
apache:
  user: www-data
  group: www-data
  modules:
    enabled:
      - rewrite
    disabled:
      - php5
  sites:
    test:
      enabled: true
      ServerName: test.com
            </code></pre>
          </section>

          <section>
            <h3>File Templates</h3>
            <pre><code>
/etc/apache2/sites.available/somevhost.conf:
  file.managed:
    source: salt://vhost.tmpl
    context: ...
            </code></pre>
            <p>Jinja2 Syntax</p>
            <p>Conditional, Loops, Variables, Imports, ...</p>
            <p>Template model is defined with context property in state</p>
          </section>

          <section>
            <h3>Top File</h3>
            <img src="img/top-file.png" class="noborder" style="width: 500px;">
          <p>Pillar data is only synched to matching minions, state files to all machines. </p>
          </section>


          <section>
            <h3>Formulas</h3>
            <p>Ready to use "formulas" or blueprints, for managing e.g. services, system configuration or more complex scenarios like autoscaling or docker orchestration</p>
            <p><a href='https://github.com/saltstack-formulas'>https://github.com/saltstack-formulas</a></p>
          </section>

        </section>

        <section>
          <section>
            <img src="img/saltstack.png" style="border: 0; box-shadow: none;">
            <h1>Demo</h1>

          </section>
          <section>
						<h3>Demo</h3>
            <img src="img/salt-demo.png" style="width: 600px; border: 0; box-shadow: none;">
          </section>
        </section>

      <section>
        <section>
          <h1>Conclusion</h1>
          <img src="img/saltstack.png" style="border: 0; box-shadow: none;">
        </section>
        <section>
          <h3>Salt</h3>
          <p>is very flexible and performant</p>
          <p>can be combined very well with other tools</p>
          <p>supports a good number of OSs and cloud providers</p>
          <p>can be daunting at first, lots (and lots) of documentation</p>
          <p>reasonably sized community, growing steadily</p>
        </section>
        <section>
          <div style="font-size: 6em;">? / !</div>
        </secction>
      </section>


			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
